@page "/profile"
@inject TimeZoneListing TimeZones
@inject Data Data
@inject AuthenticationStateProvider AuthenticationStateProvider

<EditForm Model="@CurrentUser">
    <InputText @bind-Value="CurrentUser.DisplayName" class="form-control"/>

    <InputSelect @bind-Value="CurrentUser.TimeZoneId" class="form-control">
        @foreach (var item in TimeZones.GetTimeZoneItems())
        {
            <option value="@item.Value">@item.Text</option>
        }
    </InputSelect>
</EditForm>

@code {
    private UserProfile CurrentUser { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();
        
        CurrentUser = await Data.GetUserProfile(AuthenticationStateProvider);
    }
}